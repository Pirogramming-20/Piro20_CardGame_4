{% extends 'base.html' %} {% load static %} {%block content%}
<!-- 게임 목록 -->

<div id="game_history_list">
  <div id="history_list_container">
    <div id="history_list_text">
      fdsfffffffff
    </div>
    <p id="history_list_user">현재 플레이어 : {{request.user.username}}</p>
    <ul>
      {% for game in games %}
      <li>
        <p id="history_list_content">{{game.id}} - {{game.attacker}} VS {{game.defender}}</p>
        {% if game.defender_card != null and game.attacker_card != null %}
        {% if game.rule == 0 %}
        {% if game.attacker_card > game.defender_card %}
        <p>결과 : 수비자 승리</p>
        {% elif game.attacker_card < game.defender_card %}
        <p>결과 : 공격자 승리</p>
        {% elif game.attacker_card == game.defender_card %}
        <p>결과 : 무승부</p>
        {% endif %}
    {% else %}
        {% if game.attacker_card > game.defender_card %}
        <p>결과 : 공격자 승리</p>
        {% elif game.attacker_card < game.defender_card %}
        <p>결과 : 수비자 승리</p>
        {% elif game.attacker_card == game.defender_card %}
        <p>결과 : 무승부</p>
        {% endif %}
    {% endif %}
        {% else %}
          {% if game.attacker.username == request.user.username %}
          <form action="{% url 'game:game_delete' game.pk %}" method="post">
            {% csrf_token %}
            <p id="history_list_result">진행 중...<button>게임취소</button></p>
          </form>
          {% else %}
          <a class="history_list_detail" href="{% url 'game:counter' game.pk %}">반격하기</a>
          {% endif %}
        {% endif %}
        <a class="history_list_detail" href="{% url 'game:detail' game.pk %}"> 게임전적 </a>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{%endblock%}
